{"version":3,"sources":["camera-solid.svg","times-solid.svg","components/SendImage.jsx","components/Report.jsx","components/Prediction.jsx","components/Index.jsx","index.js"],"names":["module","exports","__webpack_require__","p","SendImage","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","send","event","setState","loading","setImg","URL","createObjectURL","target","files","formData","FormData","append","fetch","state","host","method","body","then","res","json","setPrediction","data","catch","error","console","react_default","a","createElement","style","textAlign","display","flexDirection","className","Fragment","id","type","accept","capture","onChange","htmlFor","alignItems","src","camera","alt","color","marginTop","String","Component","Report","report","onClick","_this2","concat","prediction","margin","fontSize","Prediction","clear","icon","img","Report_Report","Index","pred","sendReport","label","mode","clearInput","flex","SendImage_SendImage","href","Prediction_Prediction","ReactDOM","render","Index_Index","document","getElementById"],"mappings":"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","file":"static/js/main.fbc1aa80.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/camera-solid.84c475e6.svg\";","module.exports = __webpack_public_path__ + \"static/media/times-solid.042cb2ae.svg\";","import React, { Component } from \"react\";\n\nimport camera from \"../camera-solid.svg\";\n\nexport default class SendImage extends Component {\n  constructor(props) {\n    super(props);\n    let host = \"https://isthisapple.herokuapp.com\";\n    if (!process.env.NODE_ENV || process.env.NODE_ENV === \"development\") {\n      host = \"http://127.0.0.1:5000\";\n    }\n    this.state = {\n      loading: false,\n      host: host,\n      error: null\n    };\n  }\n\n  send = event => {\n    this.setState({ loading: true });\n    this.props.setImg([\n      URL.createObjectURL(event.target.files[0]),\n      event.target.files[0]\n    ]);\n    var formData = new FormData();\n    formData.append(\"image\", event.target.files[0]);\n    fetch(this.state.host + \"/predict/\", {\n      method: \"POST\",\n      body: formData\n    })\n      .then(res => res.json())\n      .then(body => {\n        this.props.setPrediction(body.data);\n      })\n      .catch(error => {\n        console.error(error);\n        this.setState({ loading: false, error: error });\n      });\n  };\n\n  render() {\n    return (\n      <div style={{ textAlign: \"center\" }}>\n        {this.state.loading ? (\n          <div style={{ display: \"flex\", flexDirection: \"column\" }}>\n            <div className=\"lds-ellipsis\">\n              <div />\n              <div />\n              <div />\n              <div />\n            </div>\n            <div>Loading...</div>\n          </div>\n        ) : (\n          <>\n            <input\n              id=\"image\"\n              type=\"file\"\n              accept=\"image/*\"\n              capture\n              onChange={this.send}\n            />\n            <label htmlFor=\"image\">\n              <div\n                style={{\n                  display: \"flex\",\n                  flexDirection: \"column\",\n                  alignItems: \"center\"\n                }}\n              >\n                <div className=\"button\">\n                  <img\n                    src={camera}\n                    className=\"camera-icon\"\n                    alt=\"Take a photo\"\n                  />\n                </div>\n              </div>\n            </label>\n            {this.state.error !== null ? (\n              <div style={{ color: \"red\", marginTop: \"10px\" }}>\n                {String(this.state.error)}\n              </div>\n            ) : null}\n          </>\n        )}\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\n\nimport \"./report.css\";\n\nexport default class Report extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      report: false\n    };\n  }\n\n  report = () => {\n    return (\n      <>\n        <div className=\"report-question report-cell\">What is this?</div>\n        <div\n          className=\"apple report-cell clickable\"\n          onClick={() => this.props.report(\"apple\")}\n        >\n          Apple\n        </div>\n        <div\n          className=\"not-apple report-cell clickable\"\n          onClick={() => this.props.report(\"not-apple\")}\n        >\n          Not apple\n        </div>\n      </>\n    );\n  };\n\n  render() {\n    if (this.state.report) {\n      return this.report();\n    } else {\n      return (\n        <>\n          <div className={`prediction ${this.props.prediction}`}>\n            {this.props.prediction === \"apple\" ? \"Apple\" : \"Not apple\"}\n          </div>\n          <div className=\"circle-margin circle-margin-report\">\n            <div\n              className=\"report\"\n              onClick={() => this.setState({ report: true })}\n            >\n              <p style={{ margin: \"auto\", fontSize: \"5vmin\" }}>!</p>\n            </div>\n          </div>\n        </>\n      );\n    }\n  }\n}\n","import React, { Component } from \"react\";\n\nimport Report from \"./Report.jsx\";\nimport \"./prediction.css\";\nimport icon from \"../times-solid.svg\";\n\nexport default class Prediction extends Component {\n  render() {\n    return (\n      <div className=\"result\">\n        <div className=\"circle-margin circle-margin-close\">\n          <div className=\"close\" onClick={this.props.clear}>\n            <img src={icon} alt=\"Close\" />\n          </div>\n        </div>\n        <div className=\"image-holder\">\n          <img src={this.props.img} className=\"input-image\" alt=\"Your input\" />\n        </div>\n        <div>\n          <Report\n            prediction={\n              this.props.prediction[0][0] === 0 ? \"apple\" : \"not-apple\"\n            }\n            report={this.props.report}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport SendImage from \"./SendImage.jsx\";\nimport Prediction from \"./Prediction.jsx\";\n\nexport default class Index extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      img: null,\n      prediction: null\n    };\n  }\n\n  setPrediction = pred => {\n    this.setState({\n      prediction: pred\n    });\n  };\n\n  setImg = img => {\n    this.setState({\n      img: img\n    });\n  };\n\n  sendReport = label => {\n    var formData = new FormData();\n    formData.append(\"label\", label);\n    formData.append(\"image\", this.state.img[1]);\n    fetch(\"http://127.0.0.1:5000/report/\", {\n      mode: \"no-cors\",\n      method: \"POST\",\n      body: formData\n    })\n      .then(res => res.json())\n      .then(body => {\n        this.props.setPrediction(body.data);\n      })\n      .catch(error => {\n        this.setImg(this.state.img);\n      });\n  };\n\n  clearInput = () => {\n    this.setState({\n      prediction: null\n    });\n  };\n\n  render() {\n    return (\n      <>\n        {this.state.prediction === null ? (\n          <>\n            <div style={{ flex: 1 }}>\n              <div>\n                <h1 className=\"title\">\n                  Is this\n                  <br />\n                  apple?\n                </h1>\n              </div>\n              <SendImage\n                setPrediction={this.setPrediction}\n                setImg={this.setImg}\n              />\n            </div>\n            <footer className=\"footer\">\n              <p>\n                Made by&nbsp;\n                <a href=\"https://prd-ev.github.io\">PRDev</a>\n              </p>\n            </footer>\n          </>\n        ) : (\n          <>\n            <Prediction\n              prediction={this.state.prediction}\n              img={this.state.img[0]}\n              clear={this.clearInput}\n              report={this.sendReport}\n            />\n          </>\n        )}\n      </>\n    );\n  }\n}\n","import ReactDOM from \"react-dom\";\nimport React from \"react\";\nimport Index from \"./components/Index.jsx\";\n\nimport \"./index.css\";\n\nReactDOM.render(<Index />, document.getElementById(\"root\"));\n"],"sourceRoot":""}